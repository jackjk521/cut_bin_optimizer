<script>
    document.getElementById("optimizationForm").addEventListener("submit", async function(event) {
        event.preventDefault();
        const params = {
            clientWidth: parseFloat(document.getElementById("clientWidth").value),
            clientLength: parseFloat(document.getElementById("clientLength").value),
            materialWidth: parseFloat(document.getElementById("materialWidth").value),
            materialLength: parseFloat(document.getElementById("materialLength").value),
            machineMaxWidth: parseFloat(document.getElementById("machineMaxWidth").value),
            machineMaxLength: parseFloat(document.getElementById("machineMaxLength").value),
            gutter: parseFloat(document.getElementById("gutter").value),
            bleed: parseFloat(document.getElementById("bleed").value),
            pull: parseFloat(document.getElementById("pull").value)
        };
        try {
            const response = await axios.post("/api/optimize", params);
            const ctx = document.getElementById("visualization").getContext("2d");
            ctx.clearRect(0, 0, 500, 500);
            ctx.fillStyle = "#3498db";
            response.data.forEach(rect => {
                ctx.fillRect(rect.x * 5, rect.y * 5, rect.w * 5, rect.h * 5);
            });
        } catch (error) {
            console.error(error);
            alert(error.response?.data?.error || "An error occurred");
        }
    });
</script>